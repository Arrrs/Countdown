<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Casssino">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#141414">
    <title>Casssino - Shift Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        body.light {
            background-color: #f0f2f5;
            color: #000000;
        }

        body.dark {
            background-color: #000000;
            color: #ffffff;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: calc(64px + env(safe-area-inset-top));
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 0 16px 12px 16px;
            z-index: 999;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .light .header {
            background-color: #ffffff;
            border-bottom: 1px solid #f0f0f0;
        }

        .dark .header {
            background-color: #141414;
            border-bottom: 1px solid #434343;
        }

        .menu-icon {
            position: absolute;
            left: 16px;
            bottom: 12px;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            transition: all 0.3s;
            line-height: 1.2;
            display: flex;
            align-items: center;
            padding-bottom: 8px;
        }

        /* Logo Styles */
        .logo-style-default {
            font-weight: 600;
        }

        .logo-style-neon {
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #ff00ff;
            animation: neon-flicker 2s infinite alternate;
        }

        @keyframes neon-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .logo-style-bold {
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .logo-style-rainbow {
            font-weight: 700;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #ff0000);
            background-size: 200% auto;
            background-position: 0% center;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-shift 3s linear infinite;
        }

        @keyframes rainbow-shift {
            0% { background-position: 0% center; }
            100% { background-position: 100% center; }
        }

        .logo-style-elegant {
            font-family: Georgia, serif;
            font-weight: 300;
            font-size: 22px;
            letter-spacing: 3px;
            font-style: italic;
        }

        .logo-style-retro {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            font-size: 18px;
            letter-spacing: 1px;
            text-shadow: 3px 3px 0px rgba(255, 0, 0, 0.5);
        }

        .logo-style-glitch {
            font-weight: 700;
            position: relative;
            animation: glitch-skew 1s infinite;
        }

        .logo-style-glitch::before,
        .logo-style-glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .logo-style-glitch::before {
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
            color: #ff00ff;
            z-index: -1;
        }

        .logo-style-glitch::after {
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
            color: #00ffff;
            z-index: -2;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 0); }
            20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, 0); }
            40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 0); }
            60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, 0); }
            80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 0); }
            100% { clip-path: inset(58% 0 43% 0); transform: translate(2px, 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 85% 0); transform: translate(2px, 0); }
            20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 0); }
            40% { clip-path: inset(50% 0 30% 0); transform: translate(2px, 0); }
            60% { clip-path: inset(30% 0 70% 0); transform: translate(-2px, 0); }
            80% { clip-path: inset(65% 0 15% 0); transform: translate(2px, 0); }
            100% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 0); }
        }

        @keyframes glitch-skew {
            0% { transform: skew(0deg); }
            10% { transform: skew(-2deg); }
            20% { transform: skew(2deg); }
            30% { transform: skew(0deg); }
        }

        .logo-style-gradient {
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-style-fire {
            font-weight: 700;
            background: linear-gradient(180deg, #ff0000 0%, #ff7f00 50%, #ffff00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fire-flicker 0.5s infinite alternate;
        }

        @keyframes fire-flicker {
            0% { filter: brightness(1); }
            100% { filter: brightness(1.2); }
        }

        .logo-style-cyberpunk {
            font-weight: 900;
            font-size: 22px;
            letter-spacing: 4px;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41, 0 0 20px #ff006e, 0 0 30px #ff006e, 2px 2px 0 #ff006e, 4px 4px 0 #00ffff;
            transform: skewX(-10deg);
            animation: cyberpunk-flicker 0.15s infinite;
        }

        @keyframes cyberpunk-flicker {
            0%, 18%, 22%, 25%, 54%, 56%, 100% { text-shadow: 0 0 10px #00ff41, 0 0 20px #ff006e, 0 0 30px #ff006e, 2px 2px 0 #ff006e, 4px 4px 0 #00ffff; }
            20%, 24%, 55% { text-shadow: 0 0 5px #00ff41, 0 0 10px #ff006e, 1px 1px 0 #ff006e; }
        }

        .logo-style-frosted {
            font-weight: 600;
            font-size: 24px;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(173, 216, 230, 0.6), 0 0 40px rgba(135, 206, 250, 0.4), 0 4px 10px rgba(0, 0, 0, 0.4);
            filter: drop-shadow(0 0 8px rgba(173, 216, 230, 0.5)) drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
            letter-spacing: 2px;
        }

        .logo-style-minimal {
            font-weight: 400;
            font-size: 20px;
            letter-spacing: 2px;
            color: #505050;
            text-transform: uppercase;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Font Styles */
        .font-style-default {
            font-weight: 600;
        }

        .font-style-neon {
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #ff00ff;
            animation: neon-flicker 2s infinite alternate;
        }

        /* @keyframes neon-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        } */

        .font-style-bold {
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .font-style-rainbow {
            font-weight: 700;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #ff0000);
            background-size: 200% auto;
            background-position: 0% center;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-shift 3s linear infinite;
        }

        /* Apply font styles to all children recursively */
        /* .font-style-default * { font-weight: 600; }
        .font-style-neon * { 
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #ff00ff;
            animation: neon-flicker 2s infinite alternate;
        }
        .font-style-bold * { 
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .font-style-rainbow * {
            font-weight: 700;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #ff0000);
            background-size: 200% auto;
            background-position: 0% center;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-shift 3s linear infinite;
        } */

      

        .font-style-elegant {
            font-family: Georgia, serif;
            font-weight: 300;
            font-size: 22px;
            letter-spacing: 3px;
            font-style: italic;
        }

        .font-style-retro {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            font-size: 18px;
            letter-spacing: 1px;
            text-shadow: 3px 3px 0px rgba(255, 0, 0, 0.5);
        }

        .font-style-glitch {
            font-weight: 700;
            position: relative;
            animation: glitch-skew 1s infinite;
        }

        .font-style-glitch::before,
        .font-style-glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .font-style-glitch::before {
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
            color: #ff00ff;
            z-index: -1;
        }

        .font-style-glitch::after {
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
            color: #00ffff;
            z-index: -2;
        }

        /* @keyframes glitch-anim-1 {
            0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 0); }
            20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, 0); }
            40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 0); }
            60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, 0); }
            80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 0); }
            100% { clip-path: inset(58% 0 43% 0); transform: translate(2px, 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 85% 0); transform: translate(2px, 0); }
            20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 0); }
            40% { clip-path: inset(50% 0 30% 0); transform: translate(2px, 0); }
            60% { clip-path: inset(30% 0 70% 0); transform: translate(-2px, 0); }
            80% { clip-path: inset(65% 0 15% 0); transform: translate(2px, 0); }
            100% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 0); }
        }

        @keyframes glitch-skew {
            0% { transform: skew(0deg); }
            10% { transform: skew(-2deg); }
            20% { transform: skew(2deg); }
            30% { transform: skew(0deg); }
        } */

        .font-style-gradient {
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .font-style-fire {
            font-weight: 700;
            background: linear-gradient(180deg, #ff0000 0%, #ff7f00 50%, #ffff00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fire-flicker 0.5s infinite alternate;
        }

        @keyframes fire-flicker {
            0% { filter: brightness(1); }
            100% { filter: brightness(1.2); }
        }

        .font-style-cyberpunk {
            font-weight: 900;
            font-size: 18px;
            letter-spacing: 2px;
            color: #00ff41;
            text-shadow: 0 0 8px #00ff41, 0 0 15px #ff006e, 0 0 20px #ff006e, 1px 1px 0 #ff006e, 2px 2px 0 #00ffff;
            animation: cyberpunk-flicker 0.15s infinite;
        }

        .font-style-frosted {
            font-weight: 600;
            font-size: 18px;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(173, 216, 230, 0.5), 0 0 30px rgba(135, 206, 250, 0.3), 0 2px 4px rgba(0, 0, 0, 0.4);
            letter-spacing: 1.5px;
            filter: drop-shadow(0 0 6px rgba(173, 216, 230, 0.4));
        }

        .font-style-minimal-dark {
            font-weight: 400;
            font-size: 16px;
            color: #505050;
            letter-spacing: 0.3px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Drawer */
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.45);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .drawer-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .drawer {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            max-width: 100%;
            height: 100%;
            z-index: 1001;
            transition: left 0.3s;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            touch-action: pan-y;
        }

        .light .drawer {
            background-color: #ffffff;
        }

        .dark .drawer {
            background-color: #141414;
        }

        .drawer.open {
            left: 0;
        }

        .drawer-header {
            padding: 16px;
            font-size: 18px;
            font-weight: 600;
            border-bottom: 1px solid;
        }

        .light .drawer-header {
            border-color: #f0f0f0;
        }

        .dark .drawer-header {
            border-color: #434343;
        }

        .drawer-content {
            padding: 12px;
        }

        .version {
            padding: 16px;
            font-size: 14px;
            text-align: center;
            opacity: 0.3;
        }

        .setting-item {
            margin-bottom: 16px;
            padding-bottom: 16px;
            /* border-bottom: 1px solid; */
        }

        .light .setting-item {
            border-color: #f0f0f0;
        }

        .dark .setting-item {
            border-color: #434343;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .setting-icon {
            font-size: 16px;
        }

        /* Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 22px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.25);
            transition: 0.3s;
            border-radius: 22px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #1890ff;
        }

        input:checked + .slider:before {
            transform: translateX(22px);
        }

        /* Select */
        select {
            width: 100%;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid;
            font-size: 14px;
            background-color: transparent;
            cursor: pointer;
        }

        .light select {
            border-color: #d9d9d9;
            color: #000000;
        }

        .dark select {
            border-color: #434343;
            color: #ffffff;
        }

        .light select option {
            background-color: #ffffff;
            color: #000000;
        }

        .dark select option {
            background-color: #141414;
            color: #ffffff;
        }

        /* Color Input */
        input[type="color"] {
            width: 100%;
            height: 40px;
            padding: 4px;
            border-radius: 6px;
            border: 1px solid;
            cursor: pointer;
            background-color: transparent;
        }

        .light input[type="color"] {
            border-color: #d9d9d9;
        }

        .dark input[type="color"] {
            border-color: #434343;
        }

        .secondary-text {
            opacity: 0.65;
            font-size: 13px;
        }

        /* Content */
        .content {
            margin-top: calc(64px + env(safe-area-inset-top));
            padding: 8px 16px 16px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 12px;
            min-height: calc(100vh - 64px - env(safe-area-inset-top));
            max-height: calc(100vh - 64px - env(safe-area-inset-top));
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .content > * {
            flex-shrink: 1;
            width: 100%;
        }

        /* Card */
        .card {
            border-radius: 8px;
            padding: 16px;
            transition: background-color 0.3s, border-color 0.3s;
            width: 100%;
        }

        .light .card {
            background-color: #ffffff;
            border: 1px solid #f0f0f0;
        }

        .dark .card {
            background-color: #1f1f1f;
            border: 1px solid #434343;
        }

        .card.transparent {
            background: transparent !important;
            border: none !important;
        }

        /* Clock */
        .clock-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 400px;
        }

        .analog-clock {
            position: relative;
            width: 200px;
            height: 200px;
        }

        @media (min-height: 800px) {
            .analog-clock {
                width: 240px;
                height: 240px;
            }
        }

        .digital-time {
            text-align: center;
        }

        .digital-time h3 {
            font-size: 18px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .digital-time .time-value {
            font-size: 48px;
            font-weight: bold;
            line-height: 1;
        }

        @media (min-height: 800px) {
            .digital-time .time-value {
                font-size: 56px;
            }
        }

        /* Digital Clock Styles */
        .digital-style-default .time-value {
            font-weight: bold;
        }

        .digital-style-lcd .time-value {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00;
            background: #000000;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #003300;
        }

        .digital-style-neon .time-value {
            font-weight: 700;
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 30px #ff00ff, 0 0 40px #00ffff;
            animation: digital-neon-pulse 2s infinite alternate;
        }

        @keyframes digital-neon-pulse {
            0%, 100% { opacity: 1; text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 30px #ff00ff, 0 0 40px #00ffff; }
            50% { opacity: 0.8; text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff, 0 0 15px #ff00ff, 0 0 20px #00ffff; }
        }

        .digital-style-segment .time-value {
            font-family: 'Arial Black', sans-serif;
            font-weight: 900;
            color: #ff0000;
            background: #1a0000;
            padding: 20px;
            border-radius: 8px;
            letter-spacing: 8px;
            text-shadow: 0 0 3px #ff0000;
        }

        .digital-style-flip .time-value {
            font-family: 'Impact', sans-serif;
            font-weight: 900;
            background: linear-gradient(180deg, #ffffff 0%, #e0e0e0 48%, #d0d0d0 52%, #c0c0c0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        .light .digital-style-flip .time-value {
            background: linear-gradient(180deg, #333333 0%, #1a1a1a 48%, #0a0a0a 52%, #000000 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .digital-style-minimal .time-value {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 300;
            letter-spacing: 4px;
        }

        .digital-style-cozy .time-value {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 500;
            font-size: 48px;
            color: #c17857;
            text-shadow: 0 4px 12px rgba(193, 120, 87, 0.2);
            letter-spacing: 2px;
        }

        .digital-style-minimal-clock .time-value {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 400;
            font-size: 42px;
            color: #505050;
            letter-spacing: 3px;
        }

        /* Countdown */
        .countdown-container {
            max-width: 400px;
            text-align: center;
            width: 100%;
        }

        .countdown-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .countdown-digital {
            font-size: 32px;
            font-weight: bold;
            color: #52c41a;
            letter-spacing: 2px;
            line-height: 1.2;
        }

        @media (min-height: 800px) {
            .countdown-digital {
                font-size: 40px;
            }
        }

        .countdown-cards {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .countdown-card {
            min-width: 70px;
            flex: 1;
            padding: 12px 8px;
            border-radius: 6px;
        }

        .light .countdown-card {
            background-color: #fafafa;
        }

        .dark .countdown-card {
            background-color: #262626;
        }

        .countdown-card-title {
            font-size: 12px;
            opacity: 0.65;
            margin-bottom: 4px;
        }

        .countdown-card-value {
            font-size: 28px;
            font-weight: 600;
        }

        .countdown-card-value.hours {
            color: #1890ff;
        }

        .countdown-card-value.minutes {
            color: #52c41a;
        }

        .countdown-card-value.seconds {
            color: #faad14;
        }

        .countdown-text {
            font-size: 20px;
            margin-top: 8px;
        }

        .status-message {
            font-size: 20px;
            padding: 16px;
            white-space: pre-line;
        }

        /* Circular Countdown */
        .countdown-circular {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .circular-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .circular-svg {
            transform: rotate(-90deg);
        }

        .circular-label {
            font-size: 12px;
            opacity: 0.65;
        }

        .circular-value {
            font-size: 24px;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Flip Clock Countdown */
        .countdown-flip {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .flip-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .flip-card {
            width: 70px;
            height: 80px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }

        .light .flip-card {
            background: linear-gradient(180deg, #ffffff 0%, #f0f0f0 50%, #e0e0e0 50%, #d0d0d0 100%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .flip-card {
            background: linear-gradient(180deg, #2a2a2a 0%, #1f1f1f 50%, #141414 50%, #0a0a0a 100%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        .flip-card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: rgba(0, 0, 0, 0.2);
        }

        .flip-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: bold;
        }

        .flip-label {
            font-size: 12px;
            opacity: 0.65;
            text-transform: uppercase;
        }

        /* Cyberpunk Countdown */
        .countdown-cyber {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .cyber-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px;
            background: rgba(0, 255, 65, 0.05);
            border: 2px solid #00ff41;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3), inset 0 0 15px rgba(0, 255, 65, 0.1);
            border-radius: 2px;
            position: relative;
        }

        .cyber-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 0, 110, 0.1) 0%, transparent 50%);
            pointer-events: none;
            border-radius: 2px;
        }

        .cyber-value {
            font-size: 32px;
            font-weight: 900;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41, 0 0 20px #ff006e;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .cyber-label {
            font-size: 12px;
            color: #00ff41;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            text-shadow: 0 0 5px #00ff41;
            position: relative;
            z-index: 1;
        }

        /* Cozy Countdown */
        .countdown-cozy {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .cozy-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 14px 16px;
            background: linear-gradient(135deg, rgba(193, 120, 87, 0.15) 0%, rgba(230, 160, 110, 0.1) 100%);
            border: 2px solid rgba(193, 120, 87, 0.4);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(193, 120, 87, 0.15);
        }

        .cozy-value {
            font-size: 32px;
            font-weight: 700;
            color: #c17857;
        }

        .cozy-label {
            font-size: 12px;
            color: #c17857;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Card sizing adjustments */

        /* Counter Section */
        .counter-section {
            width: 100%;
            max-width: 400px;
        }

        .counter-container {
            max-width: 400px;
            text-align: center;
            width: 100%;
            position: relative;
        }

        .counter-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }

        .counter-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
        }

        .counter-reset-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            color: #8c8c8c;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            user-select: none;
            padding: 2px;
        }

        .counter-reset-btn:active {
            transform: scale(0.9);
            opacity: 0.7;
        }

        .counter-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
        }

        .counter-btn {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: 2px solid;
            font-size: 26px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            user-select: none;
        }

        .light .counter-btn {
            background-color: #ffffff;
            border-color: #1890ff;
            color: #1890ff;
        }

        .dark .counter-btn {
            background-color: #141414;
            border-color: #1890ff;
            color: #1890ff;
        }

        .counter-btn:active {
            transform: scale(0.92);
            opacity: 0.7;
        }

        .counter-value {
            font-size: 44px;
            font-weight: bold;
            min-width: 70px;
            text-align: center;
            color: #1890ff;
        }

        /* Landscape Mode - Fullscreen Countdown */
        @media (orientation: landscape) {
            .header {
                display: none !important;
            }

            .content {
                margin-top: 0;
                min-height: 100vh;
                max-height: 100vh;
                padding: 0;
                justify-content: center;
            }

            #clock-display {
                display: none !important;
            }

            #counter-section {
                display: none !important;
            }

            #countdown-display {
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #countdown-display .countdown-container {
                max-width: none;
                width: 100%;
                padding: 32px 48px;
                background: transparent !important;
                border: none !important;
            }

            #countdown-display .countdown-title {
                font-size: 28px;
                margin-bottom: 24px;
            }

            #countdown-display .countdown-digital {
                font-size: 80px;
            }

            #countdown-display .countdown-cards {
                gap: 24px;
                margin-top: 24px;
            }

            #countdown-display .countdown-card {
                min-width: 120px;
                padding: 24px 16px;
            }

            #countdown-display .countdown-card-title {
                font-size: 16px;
                margin-bottom: 8px;
            }

            #countdown-display .countdown-card-value {
                font-size: 56px;
            }

            #countdown-display .countdown-text {
                font-size: 36px;
            }

            #countdown-display .status-message {
                font-size: 36px;
            }
        }
    </style>
</head>
<body class="dark">
    <!-- Header -->
    <div class="header">
        <div class="menu-icon" onclick="toggleDrawer()">‚ò∞</div>
        <h1 id="app-title">Casssino</h1>
    </div>

    <!-- Drawer Overlay -->
    <div class="drawer-overlay" id="drawer-overlay" ontouchstart="closeDrawer()" onclick="closeDrawer()"></div>

    <!-- Drawer -->
    <div class="drawer" id="drawer">
        <div class="drawer-header">
            <span id="settings-title">Settings</span>
            <span style="position: absolute; right: 16px; cursor: pointer; font-size: 24px;" ontouchstart="closeDrawer()" onclick="closeDrawer()">√ó</span>
        </div>
        <div class="drawer-content">
            <!-- Shift -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">‚è∞</span>
                    <span id="label-shift">Shift</span>
                </div>
                <select id="shift-select" onchange="changeShift()">
                    <option value="0">D <span class="secondary-text">(07:00 - 15:00)</span></option>
                    <option value="1">M <span class="secondary-text">(15:00 - 23:00)</span></option>
                    <option value="2">N <span class="secondary-text">(23:00 - 07:00)</span></option>
                    <option value="3">D12 <span class="secondary-text">(07:00 - 19:00)</span></option>
                    <option value="4">N12 <span class="secondary-text">(19:00 - 07:00)</span></option>
                </select>
            </div>

            <!-- Show Logo -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">üé≤</span>
                    <span id="label-show-logo">Show logo</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="show-logo-toggle" onchange="toggleShowLogo()" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Logo Style -->
            <div class="setting-item" id="logo-style-setting">
                <div class="setting-label">
                    <span class="setting-icon">‚ú®</span>
                    <span id="label-logo-style">Logo style</span>
                </div>
                <select id="logo-style-select" onchange="changeLogoStyle()">
                    <option value="default" id="logo-default">Default</option>
                    <option value="neon" id="logo-neon">Neon</option>
                    <option value="bold" id="logo-bold">Bold</option>
                    <option value="rainbow" id="logo-rainbow">Rainbow</option>
                    <option value="elegant" id="logo-elegant">Elegant</option>
                    <option value="retro" id="logo-retro">Retro</option>
                    <option value="glitch" id="logo-glitch">Glitch</option>
                    <option value="gradient" id="logo-gradient">Gradient</option>
                    <option value="fire" id="logo-fire">Fire</option>
                    <option value="cyberpunk" id="logo-cyberpunk">Cyberpunk</option>
                    <option value="frosted" id="logo-frosted">Frosted</option>
                    <option value="minimal" id="logo-minimal">Minimal</option>
                </select>
            </div>
            
            <!-- Font Style -->
            <div class="setting-item" id="font-style-setting">
                <div class="setting-label">
                    <span class="setting-icon">‚ú®</span>
                    <span id="label-font-style">Font style</span>
                </div>
                <select id="font-style-select" onchange="changeFontStyle()">
                    <option value="default" id="font-default">Default</option>
                    <option value="neon" id="font-neon">Neon</option>
                    <option value="bold" id="font-bold">Bold</option>
                    <option value="rainbow" id="font-rainbow">Rainbow</option>
                    <option value="elegant" id="font-elegant">Elegant</option>
                    <option value="retro" id="font-retro">Retro</option>
                    <option value="glitch" id="font-glitch">Glitch</option>
                    <option value="gradient" id="font-gradient">Gradient</option>
                    <option value="fire" id="font-fire">Fire</option>
                    <option value="cyberpunk" id="font-cyberpunk">Cyberpunk</option>
                    <option value="frosted" id="font-frosted">Frosted</option>
                    <option value="minimal-dark" id="font-minimal-dark">Minimal Dark</option>
                </select>
            </div>

            <!-- Show Current Time -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">üëÅ</span>
                    <span id="label-show-time">Show current time</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="show-time-toggle" onchange="toggleShowTime()" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Analog Clock -->
            <div class="setting-item" id="analog-setting">
                <div class="setting-label">
                    <span class="setting-icon">üïê</span>
                    <span id="label-analog">Analog clock</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="analog-toggle" onchange="toggleAnalog()" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Clock Style -->
            <div class="setting-item" id="clock-style-setting">
                <div class="setting-label">
                    <span class="setting-icon">‚¨õ</span>
                    <span id="label-clock-style">Clock style</span>
                </div>
                <select id="clock-style-select" onchange="changeClockStyle()">
                    <option value="modern" id="style-modern">Modern</option>
                    <option value="classic" id="style-classic">Classic</option>
                    <option value="neon" id="style-neon">Neon</option>
                    <option value="cyberpunk" id="style-cyberpunk">Cyberpunk</option>
                    <option value="sunset" id="style-sunset">Sunset</option>
                    <option value="frosted" id="style-frosted">Frosted</option>
                    <option value="cozy" id="style-cozy">Cozy</option>
                </select>
            </div>

            <!-- Show Numbers -->
            <div class="setting-item" id="show-numbers-setting">
                <div class="setting-label">
                    <span id="label-show-numbers">Show numbers</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="show-numbers-toggle" onchange="toggleShowNumbers()" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Digital Clock Style -->
            <div class="setting-item" id="digital-time-style-setting">
                <div class="setting-label">
                    <span class="setting-icon">üî¢</span>
                    <span id="label-digital-time-style">Digital clock style</span>
                </div>
                <select id="digital-time-style-select" onchange="changeDigitalTimeStyle()">
                    <option value="default" id="digital-time-default">Default</option>
                    <option value="lcd" id="digital-time-lcd">LCD</option>
                    <option value="neon" id="digital-time-neon">Neon</option>
                    <option value="segment" id="digital-time-segment">Segment</option>
                    <option value="flip" id="digital-time-flip">Flip</option>
                    <option value="minimal" id="digital-time-minimal">Minimal</option>
                    <option value="cozy" id="digital-time-cozy">Cozy</option>
                    <option value="minimal-clock" id="digital-time-minimal-clock">Minimal Clock</option>
                </select>
            </div>

            <!-- Countdown Style -->
            <div class="setting-item">
                <div class="setting-label">
                    <span id="label-countdown-style">Countdown style</span>
                </div>
                <select id="countdown-style-select" onchange="changeCountdownStyle()">
                    <option value="digital" id="countdown-digital">Digital</option>
                    <option value="cards" id="countdown-cards">Cards</option>
                    <option value="text" id="countdown-text">Text</option>
                    <option value="circular" id="countdown-circular">Circular</option>
                    <option value="flip" id="countdown-flip">Flip Clock</option>
                    <option value="cyber" id="countdown-cyber">Cyberpunk</option>
                    <option value="cozy" id="countdown-cozy">Cozy</option>
                </select>
            </div>

            <!-- Show Counter -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">üî¢</span>
                    <span id="label-show-counter">Show counter</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="show-counter-toggle" onchange="toggleShowCounter()" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Theme -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-theme">Theme</span>
                </div>
                <select id="theme-select" onchange="changeTheme()">
                    <option value="dark" id="theme-dark">Dark</option>
                    <option value="light" id="theme-light">Light</option>
                    <option value="custom" id="theme-custom">Custom</option>
                </select>
            </div>

            <!-- Custom Colors (hidden by default) -->
            <div class="setting-item" id="custom-bg-color-setting" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-bg-color">Background</span>
                </div>
                <input type="color" id="custom-bg-color" onchange="changeCustomBgColor()" value="#000000">
            </div>

            <div class="setting-item" id="custom-header-bg-color-setting" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-header-bg-color">Header</span>
                </div>
                <input type="color" id="custom-header-bg-color" onchange="changeCustomHeaderBgColor()" value="#141414">
            </div>

            <div class="setting-item" id="custom-clock-bg-color-setting" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-clock-bg-color">Clock</span>
                </div>
                <input type="color" id="custom-clock-bg-color" onchange="changeCustomClockBgColor()" value="#1f1f1f">
            </div>

            <div class="setting-item" id="custom-countdown-bg-color-setting" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-countdown-bg-color">Countdown</span>
                </div>
                <input type="color" id="custom-countdown-bg-color" onchange="changeCustomCountdownBgColor()" value="#1f1f1f">
            </div>

            <div class="setting-item" id="custom-counter-bg-color-setting" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üé®</span>
                    <span id="label-counter-bg-color">Counter</span>
                </div>
                <input type="color" id="custom-counter-bg-color" onchange="changeCustomCounterBgColor()" value="#1f1f1f">
            </div>

            <!-- Language -->
            <div class="setting-item">
                <div class="setting-label">
                    <span class="setting-icon">üåç</span>
                    <span id="label-language">Language</span>
                </div>
                <select id="language-select" onchange="changeLanguage()">
                    <option value="en">English</option>
                    <option value="cs">ƒåe≈°tina</option>
                    <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                    <option value="bc">–ë—ñ–ª–æ—Ü–µ—Ä–∫—ñ–≤—Å—å–∫–∞</option>
                </select>
            </div>
            <div class="version">
                Version 0.3.0
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Clock Display -->
        <div id="clock-display"></div>

        <!-- Countdown Display -->
        <div id="countdown-display" class=""></div>

        <!-- Counter Section -->
        <div class="counter-section" id="counter-section">
            <div class="card counter-container">
                <div class="counter-header">
                    <h4 class="counter-title changableFont" id="counter-title">Counter</h4>
                    <div class="counter-reset-btn" onclick="resetCounter()">‚Üª</div>
                </div>
                <div class="counter-display changableFont">
                    <div class="counter-btn" onclick="decrementCounter()">‚àí</div>
                    <div class="counter-value" id="counter-value">8</div>
                    <div class="counter-btn" onclick="incrementCounter()">+</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Translations
        const translations = {
            en: {
                app: 'Casssino',
                settings: 'Settings',
                theme: 'Theme',
                themeDark: 'Dark',
                themeLight: 'Light',
                themeCustom: 'Custom',
                bgColor: 'Background',
                headerBgColor: 'Header',
                clockBgColor: 'Clock',
                countdownBgColor: 'Countdown',
                counterBgColor: 'Counter',
                shift: 'Shift',
                showLogo: 'Show logo',
                logoStyle: 'Logo style',
                logoDefault: 'Default',
                logoNeon: 'Neon',
                logoBold: 'Bold',
                logoRainbow: 'Rainbow',
                logoElegant: 'Elegant',
                logoRetro: 'Retro',
                logoGlitch: 'Glitch',
                logoGradient: 'Gradient',
                logoFire: 'Fire',
                logoCyberpunk: 'Cyberpunk',
                logoFrosted: 'Frosted',
                logoMinimal: 'Minimal',
                fontStyle: 'Font style',
                fontDefault: 'Default',
                fontNeon: 'Neon',
                fontBold: 'Bold',
                fontRainbow: 'Rainbow',
                fontElegant: 'Elegant',
                fontRetro: 'Retro',
                fontGlitch: 'Glitch',
                fontGradient: 'Gradient',
                fontFire: 'Fire',
                fontCyberpunk: 'Cyberpunk',
                fontFrosted: 'Frosted',
                fontMinimalDark: 'Minimal Dark',
                showCurrentTime: 'Show current time',
                analogClock: 'Analog clock',
                clockStyle: 'Clock style',
                modern: 'Modern',
                classic: 'Classic',
                neon: 'Neon',
                clockCyberpunk: 'Cyberpunk',
                clockSunset: 'Sunset',
                clockFrosted: 'Frosted',
                clockCozy: 'Cozy',
                showNumbers: 'Show numbers',
                digitalTimeStyle: 'Digital clock style',
                digitalTimeDefault: 'Default',
                digitalTimeLcd: 'LCD',
                digitalTimeNeon: 'Neon',
                digitalTimeSegment: 'Segment',
                digitalTimeFlip: 'Flip',
                digitalTimeMinimal: 'Minimal',
                digitalTimeCozy: 'Cozy',
                digitalTimeMinimalClock: 'Minimal Clock',
                countdownStyle: 'Countdown style',
                digital: 'Digital',
                cards: 'Cards',
                text: 'Text',
                circular: 'Circular',
                flip: 'Flip Clock',
                cyber: 'Cyberpunk',
                cozy: 'Cozy',
                language: 'Language',
                currentTime: 'Current time',
                shiftEnd: 'Until shift end',
                hours: 'Hours',
                minutes: 'Minutes',
                seconds: 'Seconds',
                hoursShort: 'h',
                minutesShort: 'min',
                secondsShort: 'sec',
                shiftNotStarted: 'Shift "{name}" has not started yet',
                shiftEnded: 'Shift "{name}" has ended',
                counterTitle: 'Counter',
                showCounter: 'Show counter',
            },
            uk: {
                app: 'Casssino',
                settings: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
                theme: '–¢–µ–º–∞',
                themeDark: '–¢–µ–º–Ω–∞',
                themeLight: '–°–≤—ñ—Ç–ª–∞',
                themeCustom: '–í–ª–∞—Å–Ω–∞',
                bgColor: '–§–æ–Ω',
                headerBgColor: '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
                clockBgColor: '–ì–æ–¥–∏–Ω–Ω–∏–∫',
                countdownBgColor: '–í—ñ–¥–ª—ñ–∫',
                counterBgColor: '–õ—ñ—á–∏–ª—å–Ω–∏–∫',
                shift: '–ó–º—ñ–Ω–∞',
                showLogo: '–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ª–æ–≥–æ—Ç–∏–ø',
                logoStyle: '–°—Ç–∏–ª—å –ª–æ–≥–æ—Ç–∏–ø—É',
                logoDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                logoNeon: '–ù–µ–æ–Ω',
                logoBold: '–ñ–∏—Ä–Ω–∏–π',
                logoRainbow: '–í–µ—Å–µ–ª–∫–∞',
                logoElegant: '–ï–ª–µ–≥–∞–Ω—Ç–Ω–∏–π',
                logoRetro: '–†–µ—Ç—Ä–æ',
                logoGlitch: '–ì–ª—ñ—Ç—á',
                logoGradient: '–ì—Ä–∞–¥—ñ—î–Ω—Ç',
                logoFire: '–í–æ–≥–æ–Ω—å',
                logoCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                logoFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                logoMinimal: '–ú—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π',
                fontStyle: '–°—Ç–∏–ª—å —à—Ä–∏—Ñ—Ç—É',
                fontDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                fontNeon: '–ù–µ–æ–Ω',
                fontBold: '–ñ–∏—Ä–Ω–∏–π',
                fontRainbow: '–í–µ—Å–µ–ª–∫–∞',
                fontElegant: '–ï–ª–µ–≥–∞–Ω—Ç–Ω–∏–π',
                fontRetro: '–†–µ—Ç—Ä–æ',
                fontGlitch: '–ì–ª—ñ—Ç—á',
                fontGradient: '–ì—Ä–∞–¥—ñ—î–Ω—Ç',
                fontFire: '–í–æ–≥–æ–Ω—å',
                fontCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                fontFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                fontMinimalDark: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –¢–µ–º–Ω–∏–π',
                showCurrentTime: '–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å',
                analogClock: '–ê–Ω–∞–ª–æ–≥–æ–≤–∏–π –≥–æ–¥–∏–Ω–Ω–∏–∫',
                clockStyle: '–°—Ç–∏–ª—å –≥–æ–¥–∏–Ω–Ω–∏–∫–∞',
                modern: '–°—É—á–∞—Å–Ω–∏–π',
                classic: '–ö–ª–∞—Å–∏—á–Ω–∏–π',
                neon: '–ù–µ–æ–Ω',
                clockCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                clockSunset: '–ó–∞—Ö—ñ–¥ —Å–æ–Ω—Ü—è',
                clockFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                clockCozy: '–ó–∞—Ç–∏—à–Ω–∏–π',
                showNumbers: '–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ü–∏—Ñ—Ä–∏',
                digitalTimeStyle: '–°—Ç–∏–ª—å —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞',
                digitalTimeDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                digitalTimeLcd: 'LCD',
                digitalTimeNeon: '–ù–µ–æ–Ω',
                digitalTimeSegment: '–°–µ–≥–º–µ–Ω—Ç–Ω–∏–π',
                digitalTimeFlip: '–ü–µ—Ä–µ–∫–∏–¥–Ω–∏–π',
                digitalTimeMinimal: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π',
                digitalTimeCozy: '–ó–∞—Ç–∏—à–Ω–∏–π',
                digitalTimeMinimalClock: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ì–æ–¥–∏–Ω–Ω–∏–∫',
                countdownStyle: '–°—Ç–∏–ª—å –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤—ñ–¥–ª—ñ–∫—É',
                digital: '–¶–∏—Ñ—Ä–æ–≤–∏–π',
                cards: '–ö–∞—Ä—Ç–∫–∏',
                text: '–¢–µ–∫—Å—Ç–æ–≤–∏–π',
                circular: '–ö—Ä—É–≥–æ–≤–∏–π',
                flip: '–ü–µ—Ä–µ–∫–∏–¥–Ω–∏–π',
                cyber: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                cozy: '–ó–∞—Ç–∏—à–Ω–∏–π',
                language: '–ú–æ–≤–∞',
                currentTime: '–ü–æ—Ç–æ—á–Ω–∏–π —á–∞—Å',
                shiftEnd: '–î–æ –∫—ñ–Ω—Ü—è –∑–º—ñ–Ω–∏',
                hours: '–ì–æ–¥–∏–Ω',
                minutes: '–•–≤–∏–ª–∏–Ω',
                seconds: '–°–µ–∫—É–Ω–¥',
                hoursShort: '–≥–æ–¥',
                minutesShort: '—Ö–≤',
                secondsShort: '—Å–µ–∫',
                shiftNotStarted: '–ó–º—ñ–Ω–∞ "{name}" —â–µ –Ω–µ –ø–æ—á–∞–ª–∞—Å—å',
                shiftEnded: '–ó–º—ñ–Ω–∞ "{name}" –∑–∞–∫—ñ–Ω—á–∏–ª–∞—Å—å',
                counterTitle: '–õ—ñ—á–∏–ª—å–Ω–∏–∫',
                showCounter: '–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫',
            },
            cs: {
                app: 'Casssino',
                settings: 'Nastaven√≠',
                theme: 'T√©ma',
                themeDark: 'Tmav√©',
                themeLight: 'Svƒõtl√©',
                themeCustom: 'Vlastn√≠',
                bgColor: 'Pozad√≠',
                headerBgColor: 'Z√°hlav√≠',
                clockBgColor: 'Hodiny',
                countdownBgColor: 'Odpoƒçet',
                counterBgColor: 'Poƒç√≠tadlo',
                shift: 'Smƒõna',
                showLogo: 'Zobrazit logo',
                logoStyle: 'Styl loga',
                logoDefault: 'V√Ωchoz√≠',
                logoNeon: 'Neon',
                logoBold: 'Tuƒçn√Ω',
                logoRainbow: 'Duha',
                logoElegant: 'Elegantn√≠',
                logoRetro: 'Retro',
                logoGlitch: 'Glitch',
                logoGradient: 'Gradient',
                logoFire: 'Ohe≈à',
                logoCyberpunk: 'Kyberpunk',
                logoFrosted: 'Zmrazen√Ω',
                logoMinimal: 'Minim√°ln√≠',
                fontStyle: 'Styl p√≠sma',
                fontDefault: 'V√Ωchoz√≠',
                fontNeon: 'Neon',
                fontBold: 'Tuƒçn√Ω',
                fontRainbow: 'Duha',
                fontElegant: 'Elegantn√≠',
                fontRetro: 'Retro',
                fontGlitch: 'Glitch',
                fontGradient: 'Gradient',
                fontFire: 'Ohe≈à',
                fontCyberpunk: 'Kyberpunk',
                fontFrosted: 'Zmrazen√Ω',
                fontMinimalDark: 'Minim. Tmav√Ω',
                showCurrentTime: 'Zobrazit aktu√°ln√≠ ƒças',
                analogClock: 'Analogov√© hodiny',
                clockStyle: 'Styl hodin',
                modern: 'Modern√≠',
                classic: 'Klasick√Ω',
                neon: 'Neon',
                clockCyberpunk: 'Kyberpunk',
                clockSunset: 'Z√°pad slunce',
                clockFrosted: 'Zmrazen√Ω',
                clockCozy: 'Pohodln√Ω',
                showNumbers: 'Zobrazit ƒç√≠sla',
                digitalTimeStyle: 'Styl digit√°ln√≠ch hodin',
                digitalTimeDefault: 'V√Ωchoz√≠',
                digitalTimeLcd: 'LCD',
                digitalTimeNeon: 'Neon',
                digitalTimeSegment: 'Segment',
                digitalTimeFlip: 'P≈ôeklopen√≠',
                digitalTimeMinimal: 'Minim√°ln√≠',
                digitalTimeCozy: 'Pohodln√Ω',
                digitalTimeMinimalClock: 'Minim. Hodiny',
                countdownStyle: 'Styl odpoƒç√≠t√°v√°n√≠',
                digital: 'Digit√°ln√≠',
                cards: 'Karty',
                text: 'Textov√Ω',
                circular: 'Kruhov√Ω',
                flip: 'P≈ôeklopen√≠',
                cyber: 'Kyberpunk',
                cozy: 'Pohodln√Ω',
                language: 'Jazyk',
                currentTime: 'Aktu√°ln√≠ ƒças',
                shiftEnd: 'Do konce smƒõny',
                hours: 'Hodin',
                minutes: 'Minut',
                seconds: 'Sekund',
                hoursShort: 'hod',
                minutesShort: 'min',
                secondsShort: 'sek',
                shiftNotStarted: 'Smƒõna "{name}" je≈°tƒõ nezaƒçala',
                shiftEnded: 'Smƒõna "{name}" skonƒçila',
                counterTitle: 'Poƒç√≠tadlo',
                showCounter: 'Zobrazit poƒç√≠tadlo',
            },
            bc: {
                app: '–ö–∞–∑–∑–∑—ñ–Ω–æ',
                settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
                theme: '–¢—î–º–∞',
                themeDark: '–¢–µ–º–Ω–∞',
                themeLight: '–°–≤—î—Ç–ª–∞—è',
                themeCustom: '–°–≤–æ—è',
                bgColor: '–§–æ–Ω',
                headerBgColor: '–ó–∞–≥o–ª–æ–≤–æ–∫',
                clockBgColor: '–ß–∞—Å–∏',
                countdownBgColor: '–û—Ç—â–æ—Ç',
                counterBgColor: '–©–æ—Ç—á–∏–∫',
                shift: '–ó–º—ñ–Ω–∞',
                showLogo: '–ü–æ–∫–∞–∑—É–≤–∞—Ç—å –ª–æ–≥–æ—Ç—ñ–ø',
                logoStyle: '–°—Ç—ñ–ª—å –ª–æ–≥–æ—Ç—ñ–ø–∞',
                logoDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                logoNeon: '–ù—î–æ–Ω',
                logoBold: '–ñ–∏—Ä–Ω–∏–π',
                logoRainbow: '–†–∞–¥—É–≥–∞',
                logoElegant: '–ï–ª—î–≥–∞–Ω—Ç–Ω–∏–π',
                logoRetro: '–†–µ—Ç—Ä–æ',
                logoGlitch: '–ì–ª—ñ—Ç—á',
                logoGradient: '–ì—Ä–∞–¥—ñ—î–Ω—Ç',
                logoFire: '–ê–≥–æ–Ω—å',
                logoCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                logoFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                logoMinimal: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π',
                fontStyle: '–°—Ç—ñ–ª—å —à—Ä–∏—Ñ—Ç—É',
                fontDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                fontNeon: '–ù—î–æ–Ω',
                fontBold: '–ñ–∏—Ä–Ω–∏–π',
                fontRainbow: '–†–∞–¥—É–≥–∞',
                fontElegant: '–ï–ª—î–≥–∞–Ω—Ç–Ω–∏–π',
                fontRetro: '–†–µ—Ç—Ä–æ',
                fontGlitch: '–ì–ª—ñ—Ç—á',
                fontGradient: '–ì—Ä–∞–¥—ñ—î–Ω—Ç',
                fontFire: '–ê–≥–æ–Ω—å',
                fontCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                fontFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                fontMinimalDark: '–ú—ñ–Ω. –¢–µ–º–Ω–∏–π',
                showCurrentTime: '–ü–æ–∫–∞–∑—É–≤–∞—Ç—å —Ç—î–∫—É—â—î –≤—Ä—î–º—è',
                analogClock: '–ê–Ω–∞–ª–æ–≥–æ–≤—ñ —á–∞—Å–∏',
                clockStyle: '–°—Ç—ñ–ª—å —á–∞—Å—ñ–≤',
                modern: '–°–æ–≤—Ä—î–º—î–Ω–Ω–∏–π',
                classic: '–ö–ª–∞—Å—ñ—á—î—Å–∫–∏–π',
                neon: '–ù—î–æ–Ω',
                clockCyberpunk: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                clockSunset: '–ó–∞—Ö—ñ–¥ —Å–æ–Ω—Ü—è',
                clockFrosted: '–ú–æ—Ä–æ–∑–Ω–∏–π',
                clockCozy: '–£—é—Ç–Ω–∏–π',
                showNumbers: '–ü–æ–∫–∞–∑—É–≤–∞—Ç—å —Ü–∏—Ñ—Ä–∏',
                digitalTimeStyle: '–°—Ç—ñ–ª—å —Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∞—Å—ñ–≤',
                digitalTimeDefault: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π',
                digitalTimeLcd: 'LCD',
                digitalTimeNeon: '–ù—î–æ–Ω',
                digitalTimeSegment: '–°—î–≥–º—î–Ω—Ç–Ω–∏–π',
                digitalTimeFlip: '–ü–µ—Ä–µ–∫–∏–¥–Ω–∏–π',
                digitalTimeMinimal: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π',
                digitalTimeCozy: '–£—é—Ç–Ω–∏–π',
                digitalTimeMinimalClock: '–ú—ñ–Ω. –ß–∞—Å–∏',
                countdownStyle: '–°—Ç—ñ–ª—å –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—â–æ—Ç–∞',
                digital: '–¶–∏—Ñ—Ä–æ–≤–∏–π',
                cards: '–ö–∞—Ä—Ç–æ—á–Ω–∏–π',
                text: '–¢—î–∫—Å—Ç–æ–≤–∏–π',
                circular: '–ö—Ä—É–≥–ª–∏–π',
                flip: '–ü–µ—Ä–µ–∫–∏–¥–∞—é—â–∏–π—Å—è',
                cyber: '–ö—ñ–±–µ—Ä–ø–∞–Ω–∫',
                cozy: '–£—é—Ç–Ω–∏–π',
                language: '–õ–∞–Ω–≥—É–∞–≥–µ',
                currentTime: '–¢—î–∫—É—É—â—î –≤—Ä—î–º—è',
                shiftEnd: '–î–æ –∫—ñ–Ω—Ü—è –∑–º—ñ–Ω–∏',
                hours: '–ß–∞—Å–æ–≤',
                minutes: '–ú–∏–Ω—É—Ç',
                seconds: '–°—î–∫—É–Ω–¥',
                hoursShort: '–≥–æ–¥',
                minutesShort: '—Ö–≤',
                secondsShort: '—Å—î–∫',
                shiftNotStarted: '–ó–º—ñ–Ω–∞ "{name}" —à–µ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å',
                shiftEnded: '–ó–º—ñ–Ω–∞ "{name}" –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å',
                counterTitle: '–©–æ—Ç—á–∏–∫',
                showCounter: '–ü–æ–∫–∞–∑—É–≤–∞—Ç—å —â–æ—Ç—á–∏–∫',
            }
        };

        // Shifts
        const shifts = [
            { name: 'D', start: '07:00', end: '15:00' },
            { name: 'M', start: '15:00', end: '23:00' },
            { name: 'N', start: '23:00', end: '07:00' },
            { name: 'D12', start: '07:00', end: '19:00' },
            { name: 'N12', start: '19:00', end: '07:00' },
        ];

        // State
        let state = {
            darkMode: true,
            themeMode: 'dark', // 'dark', 'light', or 'custom'
            customBgColor: '#000000',
            customHeaderBgColor: '#141414',
            customClockBgColor: '#1f1f1f',
            customCountdownBgColor: '#1f1f1f',
            customCounterBgColor: '#1f1f1f',
            selectedShift: 0,
            showLogo: true,
            logoStyle: 'default',
            fontStyle: 'default',
            showCurrentTime: true,
            analogClock: true,
            clockStyle: 'modern',
            showNumbers: true,
            digitalTimeStyle: 'default',
            countdownStyle: 'digital',
            language: 'en',
            counterValue: 8,
            showCounter: true
        };

        // Load state from localStorage
        function loadState() {
            const savedDarkMode = localStorage.getItem('darkMode');
            if (savedDarkMode !== null) state.darkMode = JSON.parse(savedDarkMode);

            const savedThemeMode = localStorage.getItem('themeMode');
            if (savedThemeMode !== null) state.themeMode = savedThemeMode;

            const savedCustomBgColor = localStorage.getItem('customBgColor');
            if (savedCustomBgColor !== null) state.customBgColor = savedCustomBgColor;

            const savedCustomHeaderBgColor = localStorage.getItem('customHeaderBgColor');
            if (savedCustomHeaderBgColor !== null) state.customHeaderBgColor = savedCustomHeaderBgColor;

            const savedCustomClockBgColor = localStorage.getItem('customClockBgColor');
            if (savedCustomClockBgColor !== null) state.customClockBgColor = savedCustomClockBgColor;

            const savedCustomCountdownBgColor = localStorage.getItem('customCountdownBgColor');
            if (savedCustomCountdownBgColor !== null) state.customCountdownBgColor = savedCustomCountdownBgColor;

            const savedCustomCounterBgColor = localStorage.getItem('customCounterBgColor');
            if (savedCustomCounterBgColor !== null) state.customCounterBgColor = savedCustomCounterBgColor;

            const savedShift = localStorage.getItem('selectedShift');
            if (savedShift !== null) state.selectedShift = JSON.parse(savedShift);

            const savedShowLogo = localStorage.getItem('showLogo');
            if (savedShowLogo !== null) state.showLogo = JSON.parse(savedShowLogo);

            const savedLogoStyle = localStorage.getItem('logoStyle');
            const validLogoStyles = ['default', 'neon', 'bold', 'rainbow', 'elegant', 'retro', 'glitch', 'gradient', 'fire', 'cyberpunk', 'frosted', 'minimal'];
            if (savedLogoStyle !== null && validLogoStyles.includes(savedLogoStyle)) {
                state.logoStyle = savedLogoStyle;
            } else {
                state.logoStyle = 'default';
            }

            const savedFontStyle = localStorage.getItem('fontStyle');
            const validFontStyles = ['default', 'neon', 'bold', 'rainbow', 'elegant', 'retro', 'glitch', 'gradient', 'fire', 'cyberpunk', 'frosted', 'minimal-dark'];
            if (savedFontStyle !== null && validFontStyles.includes(savedFontStyle)) {
                state.fontStyle = savedFontStyle;
            } else {
                state.fontStyle = 'default';
            }

            const savedShowTime = localStorage.getItem('showCurrentTime');
            if (savedShowTime !== null) state.showCurrentTime = JSON.parse(savedShowTime);

            const savedAnalog = localStorage.getItem('analogClock');
            if (savedAnalog !== null) state.analogClock = JSON.parse(savedAnalog);

            const savedClockStyle = localStorage.getItem('clockStyle');
            const validClockStyles = ['modern', 'classic', 'neon', 'cyberpunk', 'sunset', 'frosted', 'cozy'];
            if (savedClockStyle !== null && validClockStyles.includes(savedClockStyle)) {
                state.clockStyle = savedClockStyle;
            } else {
                state.clockStyle = 'modern';
            }

            const savedShowNumbers = localStorage.getItem('showNumbers');
            if (savedShowNumbers !== null) state.showNumbers = JSON.parse(savedShowNumbers);

            const savedDigitalTimeStyle = localStorage.getItem('digitalTimeStyle');
            if (savedDigitalTimeStyle !== null) state.digitalTimeStyle = savedDigitalTimeStyle;

            const savedCountdownStyle = localStorage.getItem('countdownStyle');
            const validCountdownStyles = ['digital', 'cards', 'text', 'circular', 'flip', 'cyber', 'cozy'];
            if (savedCountdownStyle !== null && validCountdownStyles.includes(savedCountdownStyle)) {
                state.countdownStyle = savedCountdownStyle;
            } else {
                state.countdownStyle = 'digital';
            }

            const savedLanguage = localStorage.getItem('language');
            if (savedLanguage !== null && translations[savedLanguage]) {
                state.language = savedLanguage;
            }

            const savedCounterValue = localStorage.getItem('counterValue');
            if (savedCounterValue !== null) state.counterValue = JSON.parse(savedCounterValue);

            const savedShowCounter = localStorage.getItem('showCounter');
            if (savedShowCounter !== null) state.showCounter = JSON.parse(savedShowCounter);

            applyState();
        }

        // Apply state to UI
        function applyState() {
            document.getElementById('theme-select').value = state.themeMode;
            document.getElementById('custom-bg-color').value = state.customBgColor;
            document.getElementById('custom-header-bg-color').value = state.customHeaderBgColor;
            document.getElementById('custom-clock-bg-color').value = state.customClockBgColor;
            document.getElementById('custom-countdown-bg-color').value = state.customCountdownBgColor;
            document.getElementById('custom-counter-bg-color').value = state.customCounterBgColor;
            document.getElementById('shift-select').value = state.selectedShift;
            document.getElementById('show-logo-toggle').checked = state.showLogo;
            document.getElementById('logo-style-select').value = state.logoStyle;
            document.getElementById('font-style-select').value = state.fontStyle;
            document.getElementById('show-time-toggle').checked = state.showCurrentTime;
            document.getElementById('analog-toggle').checked = state.analogClock;
            document.getElementById('clock-style-select').value = state.clockStyle;
            document.getElementById('show-numbers-toggle').checked = state.showNumbers;
            document.getElementById('digital-time-style-select').value = state.digitalTimeStyle;
            document.getElementById('countdown-style-select').value = state.countdownStyle;
            document.getElementById('language-select').value = state.language;
            document.getElementById('show-counter-toggle').checked = state.showCounter;

            applyTheme();
            updateVisibility();
            updateTranslations();
            updateCounter();
            updateLogo();
            updateFont();
        }

        // Update visibility
        function updateVisibility() {
            document.getElementById('custom-bg-color-setting').style.display = state.themeMode === 'custom' ? 'block' : 'none';
            document.getElementById('custom-header-bg-color-setting').style.display = state.themeMode === 'custom' ? 'block' : 'none';
            document.getElementById('custom-clock-bg-color-setting').style.display = state.themeMode === 'custom' ? 'block' : 'none';
            document.getElementById('custom-countdown-bg-color-setting').style.display = state.themeMode === 'custom' ? 'block' : 'none';
            document.getElementById('custom-counter-bg-color-setting').style.display = state.themeMode === 'custom' ? 'block' : 'none';
            document.getElementById('logo-style-setting').style.display = state.showLogo ? 'block' : 'none';
            document.getElementById('analog-setting').style.display = state.showCurrentTime ? 'block' : 'none';
            document.getElementById('clock-style-setting').style.display =
                (state.showCurrentTime && state.analogClock) ? 'block' : 'none';
            document.getElementById('show-numbers-setting').style.display =
                (state.showCurrentTime && state.analogClock) ? 'block' : 'none';
            document.getElementById('digital-time-style-setting').style.display =
                (state.showCurrentTime && !state.analogClock) ? 'block' : 'none';
            document.getElementById('counter-section').style.display = state.showCounter ? 'block' : 'none';
        }

        // Update translations
        function updateTranslations() {
            const t = translations[state.language];
            document.getElementById('app-title').textContent = t.app;
            document.getElementById('settings-title').textContent = t.settings;
            document.getElementById('label-theme').textContent = t.theme;
            if (document.getElementById('theme-dark')) document.getElementById('theme-dark').textContent = t.themeDark;
            if (document.getElementById('theme-light')) document.getElementById('theme-light').textContent = t.themeLight;
            if (document.getElementById('theme-custom')) document.getElementById('theme-custom').textContent = t.themeCustom;
            if (document.getElementById('label-bg-color')) document.getElementById('label-bg-color').textContent = t.bgColor;
            if (document.getElementById('label-header-bg-color')) document.getElementById('label-header-bg-color').textContent = t.headerBgColor;
            if (document.getElementById('label-clock-bg-color')) document.getElementById('label-clock-bg-color').textContent = t.clockBgColor;
            if (document.getElementById('label-countdown-bg-color')) document.getElementById('label-countdown-bg-color').textContent = t.countdownBgColor;
            if (document.getElementById('label-counter-bg-color')) document.getElementById('label-counter-bg-color').textContent = t.counterBgColor;
            document.getElementById('label-shift').textContent = t.shift;
            document.getElementById('label-show-logo').textContent = t.showLogo;
            document.getElementById('label-logo-style').textContent = t.logoStyle;
            document.getElementById('logo-default').textContent = t.logoDefault;
            document.getElementById('logo-neon').textContent = t.logoNeon;
            document.getElementById('logo-bold').textContent = t.logoBold;
            document.getElementById('logo-rainbow').textContent = t.logoRainbow;
            document.getElementById('logo-elegant').textContent = t.logoElegant;
            document.getElementById('logo-retro').textContent = t.logoRetro;
            document.getElementById('logo-glitch').textContent = t.logoGlitch;
            document.getElementById('logo-gradient').textContent = t.logoGradient;
            document.getElementById('logo-fire').textContent = t.logoFire;
            if (document.getElementById('logo-cyberpunk')) document.getElementById('logo-cyberpunk').textContent = t.logoCyberpunk;
            if (document.getElementById('logo-sunset')) document.getElementById('logo-sunset').textContent = t.logoSunset;
            if (document.getElementById('logo-frosted')) document.getElementById('logo-frosted').textContent = t.logoFrosted;
            document.getElementById('label-font-style').textContent = t.fontStyle;
            document.getElementById('font-default').textContent = t.fontDefault;
            document.getElementById('font-neon').textContent = t.fontNeon;
            document.getElementById('font-bold').textContent = t.fontBold;
            document.getElementById('font-rainbow').textContent = t.fontRainbow;
            document.getElementById('font-elegant').textContent = t.fontElegant;
            document.getElementById('font-retro').textContent = t.fontRetro;
            document.getElementById('font-glitch').textContent = t.fontGlitch;
            document.getElementById('font-gradient').textContent = t.fontGradient;
            document.getElementById('font-fire').textContent = t.fontFire;
            if (document.getElementById('font-cyberpunk')) document.getElementById('font-cyberpunk').textContent = t.fontCyberpunk;
            if (document.getElementById('font-sunset')) document.getElementById('font-sunset').textContent = t.fontSunset;
            if (document.getElementById('font-frosted')) document.getElementById('font-frosted').textContent = t.fontFrosted;
            document.getElementById('label-show-time').textContent = t.showCurrentTime;
            document.getElementById('label-analog').textContent = t.analogClock;
            document.getElementById('label-clock-style').textContent = t.clockStyle;
            if (document.getElementById('style-modern')) document.getElementById('style-modern').textContent = t.modern;
            if (document.getElementById('style-classic')) document.getElementById('style-classic').textContent = t.classic;
            if (document.getElementById('style-neon')) document.getElementById('style-neon').textContent = t.neon;
            if (document.getElementById('style-cyberpunk')) document.getElementById('style-cyberpunk').textContent = t.clockCyberpunk;
            if (document.getElementById('style-sunset')) document.getElementById('style-sunset').textContent = t.clockSunset;
            if (document.getElementById('style-frosted')) document.getElementById('style-frosted').textContent = t.clockFrosted;
            if (document.getElementById('style-cozy')) document.getElementById('style-cozy').textContent = t.clockCozy;
            document.getElementById('label-show-numbers').textContent = t.showNumbers;
            document.getElementById('label-digital-time-style').textContent = t.digitalTimeStyle;
            document.getElementById('digital-time-default').textContent = t.digitalTimeDefault;
            document.getElementById('digital-time-lcd').textContent = t.digitalTimeLcd;
            document.getElementById('digital-time-neon').textContent = t.digitalTimeNeon;
            document.getElementById('digital-time-segment').textContent = t.digitalTimeSegment;
            document.getElementById('digital-time-flip').textContent = t.digitalTimeFlip;
            document.getElementById('digital-time-minimal').textContent = t.digitalTimeMinimal;
            document.getElementById('label-countdown-style').textContent = t.countdownStyle;
            if (document.getElementById('countdown-digital')) document.getElementById('countdown-digital').textContent = t.digital;
            if (document.getElementById('countdown-cards')) document.getElementById('countdown-cards').textContent = t.cards;
            if (document.getElementById('countdown-text')) document.getElementById('countdown-text').textContent = t.text;
            if (document.getElementById('countdown-circular')) document.getElementById('countdown-circular').textContent = t.circular;
            if (document.getElementById('countdown-flip')) document.getElementById('countdown-flip').textContent = t.flip;
            if (document.getElementById('countdown-cyber')) document.getElementById('countdown-cyber').textContent = t.cyber;
            if (document.getElementById('countdown-cozy')) document.getElementById('countdown-cozy').textContent = t.cozy;
            document.getElementById('label-language').textContent = t.language;
            document.getElementById('counter-title').textContent = t.counterTitle;
            document.getElementById('label-show-counter').textContent = t.showCounter;
        }

        // Toggle functions
        function toggleDrawer() {
            const isOpen = document.getElementById('drawer').classList.contains('open');
            if (!isOpen) {
                openDrawer();
            } else {
                closeDrawer();
            }
        }

        function openDrawer() {
            document.getElementById('drawer').classList.add('open');
            document.getElementById('drawer-overlay').classList.add('open');
            // Push a new history state when opening drawer
            history.pushState({ drawerOpen: true }, '');
        }

        function closeDrawer() {
            document.getElementById('drawer').classList.remove('open');
            document.getElementById('drawer-overlay').classList.remove('open');
        }

        function changeTheme() {
            state.themeMode = document.getElementById('theme-select').value;
            localStorage.setItem('themeMode', state.themeMode);

            // Update darkMode for backward compatibility
            state.darkMode = (state.themeMode === 'dark' || state.themeMode === 'custom');
            localStorage.setItem('darkMode', JSON.stringify(state.darkMode));

            applyTheme();
            updateVisibility();
        }

        function changeCustomBgColor() {
            state.customBgColor = document.getElementById('custom-bg-color').value;
            localStorage.setItem('customBgColor', state.customBgColor);
            applyTheme();
        }

        function changeCustomHeaderBgColor() {
            state.customHeaderBgColor = document.getElementById('custom-header-bg-color').value;
            localStorage.setItem('customHeaderBgColor', state.customHeaderBgColor);
            applyTheme();
        }

        function changeCustomClockBgColor() {
            state.customClockBgColor = document.getElementById('custom-clock-bg-color').value;
            localStorage.setItem('customClockBgColor', state.customClockBgColor);
            applyTheme();
        }

        function changeCustomCountdownBgColor() {
            state.customCountdownBgColor = document.getElementById('custom-countdown-bg-color').value;
            localStorage.setItem('customCountdownBgColor', state.customCountdownBgColor);
            applyTheme();
        }

        function changeCustomCounterBgColor() {
            state.customCounterBgColor = document.getElementById('custom-counter-bg-color').value;
            localStorage.setItem('customCounterBgColor', state.customCounterBgColor);
            applyTheme();
        }

        function applyTheme() {
            if (state.themeMode === 'custom') {
                document.body.className = 'dark'; // Use dark class for text colors
                document.body.style.backgroundColor = state.customBgColor;

                // Apply custom header background
                const header = document.querySelector('.header');
                if (header) header.style.backgroundColor = state.customHeaderBgColor;

                // Apply custom clock background
                const clockCards = document.querySelectorAll('.clock-container');
                clockCards.forEach(card => {
                    card.style.backgroundColor = state.customClockBgColor;
                });

                // Apply custom countdown background
                const countdownCards = document.querySelectorAll('.countdown-container');
                countdownCards.forEach(card => {
                    card.style.backgroundColor = state.customCountdownBgColor;
                });

                // Apply custom counter background
                const counterCards = document.querySelectorAll('.counter-container');
                counterCards.forEach(card => {
                    card.style.backgroundColor = state.customCounterBgColor;
                });
            } else {
                document.body.className = state.themeMode;
                document.body.style.backgroundColor = '';

                // Reset header background
                const header = document.querySelector('.header');
                if (header) header.style.backgroundColor = '';

                // Reset all card backgrounds
                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    card.style.backgroundColor = '';
                });
            }
        }

        function changeShift() {
            state.selectedShift = parseInt(document.getElementById('shift-select').value);
            localStorage.setItem('selectedShift', JSON.stringify(state.selectedShift));
        }

        function getDefaultCounterValue() {
            const shift = shifts[state.selectedShift];
            return (shift.name === 'D12' || shift.name === 'N12') ? 12 : 8;
        }

        function toggleShowLogo() {
            state.showLogo = !state.showLogo;
            localStorage.setItem('showLogo', JSON.stringify(state.showLogo));
            updateVisibility();
            updateLogo();
        }

        function changeLogoStyle() {
            state.logoStyle = document.getElementById('logo-style-select').value;
            localStorage.setItem('logoStyle', state.logoStyle);
            updateLogo();
        }

        function changeFontStyle() {
            state.fontStyle = document.getElementById('font-style-select').value;
            localStorage.setItem('fontStyle', state.fontStyle);
            updateFont();
        }

        function updateLogo() {
            const logo = document.getElementById('app-title');
            if (!state.showLogo) {
                logo.style.display = 'none';
                return;
            }
            logo.style.display = 'block';

            // Remove all logo style classes
            logo.className = '';

            // Add new style class
            if (state.logoStyle !== 'default') {
                logo.classList.add(`logo-style-${state.logoStyle}`);
            } else {
                logo.classList.add('logo-style-default');
            }

            // For glitch effect, we need the data-text attribute
            if (state.logoStyle === 'glitch') {
                logo.setAttribute('data-text', logo.textContent);
            } else {
                logo.removeAttribute('data-text');
            }
        }

        function updateFont() {
            const elementsToChange = document.getElementsByClassName('changableFont');
            if (elementsToChange.length > 0) {
                const targetClass = state.fontStyle !== 'default' ? `font-style-${state.fontStyle}` : 'font-style-default';

                Array.from(elementsToChange).forEach(el => {
                    // Only update if the element doesn't already have the correct class
                    const hasCorrectClass = el.classList.contains(targetClass);

                    if (!hasCorrectClass) {
                        // Remove all font-style-* classes
                        el.classList.forEach(className => {
                            if (className.startsWith('font-style-')) {
                                el.classList.remove(className);
                            }
                        });

                        // Add new style class
                        el.classList.add(targetClass);
                    }

                    // For glitch effect, we need the data-text attribute
                    // Only set it if it's missing or different
                    if (state.fontStyle === 'glitch') {
                        if (el.getAttribute('data-text') !== el.textContent) {
                            el.setAttribute('data-text', el.textContent);
                        }
                    } else {
                        if (el.hasAttribute('data-text')) {
                            el.removeAttribute('data-text');
                        }
                    }
                });
            }
        }

        function toggleShowTime() {
            state.showCurrentTime = !state.showCurrentTime;
            localStorage.setItem('showCurrentTime', JSON.stringify(state.showCurrentTime));
            updateVisibility();
        }

        function toggleAnalog() {
            state.analogClock = !state.analogClock;
            localStorage.setItem('analogClock', JSON.stringify(state.analogClock));
            updateVisibility();
        }

        function changeClockStyle() {
            state.clockStyle = document.getElementById('clock-style-select').value;
            localStorage.setItem('clockStyle', state.clockStyle);
        }

        function changeDigitalTimeStyle() {
            state.digitalTimeStyle = document.getElementById('digital-time-style-select').value;
            localStorage.setItem('digitalTimeStyle', state.digitalTimeStyle);
        }

        function toggleShowNumbers() {
            state.showNumbers = !state.showNumbers;
            localStorage.setItem('showNumbers', JSON.stringify(state.showNumbers));
        }

        function changeCountdownStyle() {
            state.countdownStyle = document.getElementById('countdown-style-select').value;
            localStorage.setItem('countdownStyle', state.countdownStyle);
        }

        function changeLanguage() {
            const newLanguage = document.getElementById('language-select').value;
            // Validate language exists in translations
            if (translations[newLanguage]) {
                state.language = newLanguage;
                localStorage.setItem('language', state.language);
                updateTranslations();
            }
        }

        function toggleShowCounter() {
            state.showCounter = !state.showCounter;
            localStorage.setItem('showCounter', JSON.stringify(state.showCounter));
            updateVisibility();
        }

        // Counter functions
        function updateCounter() {
            document.getElementById('counter-value').textContent = state.counterValue;
        }

        function incrementCounter() {
            state.counterValue++;
            localStorage.setItem('counterValue', JSON.stringify(state.counterValue));
            updateCounter();
        }

        function decrementCounter() {
            if (state.counterValue > 0) {
                state.counterValue--;
                localStorage.setItem('counterValue', JSON.stringify(state.counterValue));
                updateCounter();
            }
        }

        function resetCounter() {
            state.counterValue = getDefaultCounterValue();
            localStorage.setItem('counterValue', JSON.stringify(state.counterValue));
            updateCounter();
        }

        // Time utilities
        function parseTime(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return { hours, minutes };
        }

        function getShiftEndTime(now, shift) {
            const startTime = parseTime(shift.start);
            const endTime = parseTime(shift.end);

            let endDate = new Date(now);
            endDate.setHours(endTime.hours, endTime.minutes, 0, 0);

            // Handle night shifts that cross midnight
            if (endTime.hours < startTime.hours) {
                // This is a night shift
                if (now.getHours() < endTime.hours) {
                    // We're in early morning before shift end - end is today
                    // (already set correctly)
                } else {
                    // We're either during the shift evening or after it ended
                    // End time is tomorrow
                    endDate.setDate(endDate.getDate() + 1);
                }
            } else {
                // Day shift
                if (now > endDate) {
                    // Shift ended today, next one is tomorrow
                    endDate.setDate(endDate.getDate() + 1);
                }
            }

            return endDate;
        }

        function getShiftStatus(now, shift) {
            const startTime = parseTime(shift.start);
            const endTime = parseTime(shift.end);

            let startDate = new Date(now);
            startDate.setHours(startTime.hours, startTime.minutes, 0, 0);

            let endDate = new Date(now);
            endDate.setHours(endTime.hours, endTime.minutes, 0, 0);

            // Handle night shifts that cross midnight
            if (endTime.hours < startTime.hours) {
                // This is a night shift (e.g., 23:00-07:00 or 19:00-07:00)
                if (now.getHours() < endTime.hours) {
                    // We're in the early morning (after midnight but before shift end)
                    // Start was yesterday, end is today
                    startDate.setDate(startDate.getDate() - 1);
                } else if (now.getHours() >= startTime.hours) {
                    // We're in the evening/night (after shift start but before midnight)
                    // Start is today, end is tomorrow
                    endDate.setDate(endDate.getDate() + 1);
                } else {
                    // We're in the middle of the day (after shift end, before shift start)
                    // Next shift starts today evening, ends tomorrow morning
                    endDate.setDate(endDate.getDate() + 1);
                }
            }

            if (now < startDate) return 'notStarted';
            if (now > endDate) return 'ended';
            return 'active';
        }

        // Render analog clock
        function renderAnalogClock(now) {
            const seconds = now.getSeconds();
            const minutes = now.getMinutes();
            const hours = now.getHours() % 12;

            const secondDeg = seconds * 6;
            const minuteDeg = minutes * 6 + seconds * 0.1;
            const hourDeg = hours * 30 + minutes * 0.5;

            const clockSize = window.innerHeight < 800 ? 200 : 240;
            const style = state.clockStyle;

            // Style-specific settings
            let circleColor = state.darkMode ? '#1f1f1f' : '#ffffff';
            // Use custom color for analog clock dial when in custom theme mode
            if (state.themeMode === 'custom') {
                circleColor = state.customClockBgColor;
            }
            const strokeColor = state.darkMode ? '#434343' : '#d9d9d9';
            const textColor = state.darkMode ? '#ffffff' : '#000000';
            const markColor = state.darkMode ? '#666666' : '#cccccc';
            let handColor = state.darkMode ? '#ffffff' : '#000000';

            // Neon style colors
            if (style === 'neon') {
                handColor = '#00ffff';
            } else if (style === 'cyberpunk') {
                handColor = '#00ff41';
            } else if (style === 'sunset') {
                handColor = '#ff6b35';
            } else if (style === 'frosted') {
                handColor = '#ffffff';
            } else if (style === 'cozy') {
                handColor = '#c17857';
            }

            let svg = `<svg width="${clockSize}" height="${clockSize}">`;

            // Add glow filter for neon style
            if (style === 'neon') {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>`;
            } else if (style === 'cyberpunk') {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="shadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="0" flood-color="#ff006e" flood-opacity="0.5"/>
                    </filter>
                </defs>`;
            } else if (style === 'sunset') {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>`;
            } else if (style === 'frosted') {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>`;
            } else if (style === 'cozy') {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="1" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>`;
            } else {
                svg += `<defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="0.5" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>`;
            }

            // Clock face
            const strokeWidth = style === 'classic' ? 4 : 2;
            svg += `<circle cx="${clockSize/2}" cy="${clockSize/2}" r="${clockSize/2 - 10}"
                fill="${circleColor}" stroke="${strokeColor}" stroke-width="${strokeWidth}"/>`;

            // Numbers
            if (state.showNumbers) {
                for (let i = 0; i < 12; i++) {
                    const num = (i === 0 ? 12 : i);
                    const angle = (i * 30 - 90) * (Math.PI / 180);
                    const radius = clockSize/2 - 35;
                    const x = clockSize/2 + radius * Math.cos(angle);
                    const y = clockSize/2 + radius * Math.sin(angle);
                    const fontSize = style === 'cozy' ? 16 : 18;
                    const fontWeight = style === 'classic' ? 'bold' : 'normal';
                    const numColor = style === 'neon' ? '#00ffff' : style === 'cyberpunk' ? '#00ff41' : style === 'sunset' ? '#ff6b35' : style === 'frosted' ? '#ffffff' : style === 'cozy' ? '#c17857' : textColor;
                    const filter = (style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted') ? 'filter="url(#glow)"' : '';
                    svg += `<text x="${x}" y="${y}" text-anchor="middle" dominant-baseline="middle"
                        font-size="${fontSize}" font-weight="${fontWeight}"
                        fill="${numColor}" ${filter}>${num}</text>`;

                }
            }

            // First, draw minute marks (smaller marks)
            {
                for (let i = 0; i < 60; i++) {
                    // Skip hour marks for now - we'll draw them separately
                    if (i % 5 === 0) continue;

                    const angle = (i * 6 - 90) * (Math.PI / 180);
                    const outerRadius = clockSize/2 - 10;
                    const minuteMarkLength = 6;
                    const innerRadius = outerRadius - minuteMarkLength;
                    const x1 = clockSize/2 + outerRadius * Math.cos(angle) + 0.5;
                    const y1 = clockSize/2 + outerRadius * Math.sin(angle) + 0.5;
                    const x2 = clockSize/2 + innerRadius * Math.cos(angle) + 0.5;
                    const y2 = clockSize/2 + innerRadius * Math.sin(angle) + 0.5;
                    const markStroke = style === 'neon' ? '#00ffff' : style === 'cyberpunk' ? '#00ff41' : style === 'sunset' ? '#ff6b35' : style === 'frosted' ? '#ffffff' : style === 'cozy' ? '#c17857' : markColor;
                    const markWidth = style === 'neon' ? 1.5 : style === 'cyberpunk' ? 1.5 : 1;
                    svg += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}"
                        stroke="${markStroke}" stroke-width="${markWidth}" stroke-linecap="round" opacity="1"/>`;
                }
                
                // Then, draw hour marks (larger marks) - drawn last so they appear on top
                for (let i = 0; i < 60; i += 5) {
                    const angle = (i * 6 - 90) * (Math.PI / 180);
                    const outerRadius = clockSize/2 - 10;
                    let hourMarkLength = 12;
                    if (style === 'classic') hourMarkLength = 14;
                    else if (style === 'neon' || style === 'cyberpunk' || style === 'sunset') hourMarkLength = 14;
                    else if (style === 'frosted' || style === 'cozy') hourMarkLength = 12;

                    const innerRadius = outerRadius - hourMarkLength;
                    const x1 = clockSize/2 + outerRadius * Math.cos(angle) + 0.5;
                    const y1 = clockSize/2 + outerRadius * Math.sin(angle) + 0.5;
                    const x2 = clockSize/2 + innerRadius * Math.cos(angle) + 0.5;
                    const y2 = clockSize/2 + innerRadius * Math.sin(angle) + 0.5;
                    const markStroke = style === 'neon' ? '#00ffff' : style === 'cyberpunk' ? '#00ff41' : style === 'sunset' ? '#ff6b35' : style === 'frosted' ? '#ffffff' : style === 'cozy' ? '#c17857' : markColor;
                    const markWidth = style === 'neon' ? 2.5 : style === 'cyberpunk' ? 2.5 : 2;
                    const shouldGlow = style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted' || style === 'cozy';
                    const filterAttr = shouldGlow ? 'filter="url(#glow)"' : '';
                    svg += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}"
                        stroke="${markStroke}" stroke-width="${markWidth}" stroke-linecap="round" opacity="1" ${filterAttr}/>`;
                }
            }

            // Hour hand
            const hourLength = clockSize * 0.28;
            const hourX = clockSize/2 + hourLength * Math.cos((hourDeg - 90) * Math.PI / 180);
            const hourY = clockSize/2 + hourLength * Math.sin((hourDeg - 90) * Math.PI / 180);
            const hourWidth = style === 'classic' ? 8 : 6;
            const hourFilter = (style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted') ? 'filter="url(#glow)"' : '';
            svg += `<line x1="${clockSize/2}" y1="${clockSize/2}" x2="${hourX}" y2="${hourY}"
                stroke="${handColor}" stroke-width="${hourWidth}" stroke-linecap="round" ${hourFilter}/>`;

            // Minute hand
            const minuteLength = clockSize * 0.40;
            const minuteX = clockSize/2 + minuteLength * Math.cos((minuteDeg - 90) * Math.PI / 180);
            const minuteY = clockSize/2 + minuteLength * Math.sin((minuteDeg - 90) * Math.PI / 180);
            const minuteWidth = style === 'classic' ? 6 : 4;
            const minuteFilter = (style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted') ? 'filter="url(#glow)"' : '';
            svg += `<line x1="${clockSize/2}" y1="${clockSize/2}" x2="${minuteX}" y2="${minuteY}"
                stroke="${handColor}" stroke-width="${minuteWidth}" stroke-linecap="round" ${minuteFilter}/>`;

            // Center dot
            const centerSize = style === 'classic' ? 8 : 6;
            const centerColor = style === 'neon' ? '#00ffff' : style === 'cyberpunk' ? '#00ff41' : style === 'sunset' ? '#ff6b35' : handColor;
            const centerFilter = (style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted') ? 'filter="url(#glow)"' : '';
            svg += `<circle cx="${clockSize/2}" cy="${clockSize/2}" r="${centerSize}" fill="${centerColor}" ${centerFilter}/>`;
            const dotColor = style === 'neon' ? '#ff00ff' : style === 'cyberpunk' ? '#ff006e' : style === 'sunset' ? '#e76f51' : style === 'cozy' ? '#e8a894' : '#ff4d4f';
            svg += `<circle cx="${clockSize/2}" cy="${clockSize/2}" r="3" fill="${dotColor}"/>`;

            // Second hand - drawn LAST so it always appears on top
            const secondLength = clockSize * 0.44;
            const secondX = clockSize/2 + secondLength * Math.cos((secondDeg - 90) * Math.PI / 180) + 0.5;
            const secondY = clockSize/2 + secondLength * Math.sin((secondDeg - 90) * Math.PI / 180) + 0.5;
            const secondColor = style === 'neon' ? '#ff00ff' : style === 'cyberpunk' ? '#ff006e' : style === 'sunset' ? '#e76f51' : style === 'frosted' ? '#e0e0e0' : style === 'cozy' ? '#e8a894' : '#ff4d4f';
            const secondWidth = 2.5;
            const secondFilter = (style === 'neon' || style === 'cyberpunk' || style === 'sunset' || style === 'frosted') ? 'filter="url(#glow)"' : '';
            svg += `<line x1="${clockSize/2}" y1="${clockSize/2}" x2="${secondX}" y2="${secondY}"
                stroke="${secondColor}" stroke-width="${secondWidth}" stroke-linecap="round" stroke-linejoin="round" opacity="1" ${secondFilter}/>`;
            svg += `</svg>`;

            return `<div class="card transparent clock-container">
                <div class="analog-clock">${svg}</div>
            </div>`;
        }

        // Render digital clock
        function renderDigitalClock(now) {
            const t = translations[state.language];
            const timeStr = now.toTimeString().slice(0, 8); // HH:MM:SS
            return `<div class="card clock-container">
                <div class="digital-time digital-style-${state.digitalTimeStyle}">
                    <h3 class="changableFont">${t.currentTime}</h3>
                    <div class="time-value changableFont">${timeStr}</div>
                </div>
            </div>`;
        }

        // Render countdown
        function renderCountdown(now) {
            const t = translations[state.language];
            const shift = shifts[state.selectedShift];
            const status = getShiftStatus(now, shift);

            if (status !== 'active') {
                let message = status === 'notStarted'
                    ? t.shiftNotStarted.replace('{name}', shift.name)
                    : t.shiftEnded.replace('{name}', shift.name);
                return `<div class="card countdown-container ">
                    <div class="status-message changableFont">${message}</div>
                </div>`;
            }

            const endTime = getShiftEndTime(now, shift);
            const diff = endTime - now;
            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);

            if (state.countdownStyle === 'digital') {
                const timeStr = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-digital changableFont">${timeStr}</div>
                </div>`;
            } else if (state.countdownStyle === 'cards') {
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-cards">
                        <div class="countdown-card">
                            <div class="countdown-card-title changableFont">${t.hours}</div>
                            <div class="countdown-card-value hours changableFont">${hours}</div>
                        </div>
                        <div class="countdown-card">
                            <div class="countdown-card-title changableFont">${t.minutes}</div>
                            <div class="countdown-card-value minutes changableFont">${minutes}</div>
                        </div>
                        <div class="countdown-card">
                            <div class="countdown-card-title changableFont">${t.seconds}</div>
                            <div class="countdown-card-value seconds changableFont">${seconds}</div>
                        </div>
                    </div>
                </div>`;
            } else if (state.countdownStyle === 'text') {
                const hoursText = hours > 0 ? `${hours} ${t.hoursShort} ` : '';
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-text changableFont">${hoursText}${minutes} ${t.minutesShort} ${seconds} ${t.secondsShort}</div>
                </div>`;
            } else if (state.countdownStyle === 'circular') {
                const hoursMax = (shifts[state.selectedShift].name === 'D12' || shifts[state.selectedShift].name === 'N12') ? 12 : 8;
                const hoursPercent = (hours / hoursMax) * 100;
                const minutesPercent = (minutes / 60) * 100;
                const secondsPercent = (seconds / 60) * 100;
                const size = 80;
                const strokeWidth = 8;
                const radius = (size - strokeWidth) / 2;
                const circumference = 2 * Math.PI * radius;

                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-circular">
                        <div class="circular-item">
                            <div style="position: relative; width: ${size}px; height: ${size}px;">
                                <svg class="circular-svg" width="${size}" height="${size}">
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="${state.darkMode ? '#262626' : '#f0f0f0'}" stroke-width="${strokeWidth}"/>
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="#1890ff" stroke-width="${strokeWidth}"
                                        stroke-dasharray="${circumference}"
                                        stroke-dashoffset="${circumference * (1 - hoursPercent / 100)}"
                                        stroke-linecap="round"/>
                                </svg>
                                <div class="circular-value hours changableFont">${hours}</div>
                            </div>
                            <div class="circular-label changableFont">${t.hours}</div>
                        </div>
                        <div class="circular-item">
                            <div style="position: relative; width: ${size}px; height: ${size}px;">
                                <svg class="circular-svg" width="${size}" height="${size}">
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="${state.darkMode ? '#262626' : '#f0f0f0'}" stroke-width="${strokeWidth}"/>
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="#52c41a" stroke-width="${strokeWidth}"
                                        stroke-dasharray="${circumference}"
                                        stroke-dashoffset="${circumference * (1 - minutesPercent / 100)}"
                                        stroke-linecap="round"/>
                                </svg>
                                <div class="circular-value minutes changableFont">${minutes}</div>
                            </div>
                            <div class="circular-label changableFont">${t.minutes}</div>
                        </div>
                        <div class="circular-item">
                            <div style="position: relative; width: ${size}px; height: ${size}px;">
                                <svg class="circular-svg" width="${size}" height="${size}">
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="${state.darkMode ? '#262626' : '#f0f0f0'}" stroke-width="${strokeWidth}"/>
                                    <circle cx="${size/2}" cy="${size/2}" r="${radius}"
                                        fill="none" stroke="#faad14" stroke-width="${strokeWidth}"
                                        stroke-dasharray="${circumference}"
                                        stroke-dashoffset="${circumference * (1 - secondsPercent / 100)}"
                                        stroke-linecap="round"/>
                                </svg>
                                <div class="circular-value seconds changableFont">${seconds}</div>
                            </div>
                            <div class="circular-label changableFont">${t.seconds}</div>
                        </div>
                    </div>
                </div>`;
            } else if (state.countdownStyle === 'flip') {
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-flip">
                        <div class="flip-item">
                            <div class="flip-card">
                                <div class="flip-value changableFont">${String(hours).padStart(2, '0')}</div>
                            </div>
                            <div class="flip-label changableFont">${t.hours}</div>
                        </div>
                        <div class="flip-item">
                            <div class="flip-card">
                                <div class="flip-value changableFont">${String(minutes).padStart(2, '0')}</div>
                            </div>
                            <div class="flip-label changableFont">${t.minutes}</div>
                        </div>
                        <div class="flip-item">
                            <div class="flip-card">
                                <div class="flip-value changableFont">${String(seconds).padStart(2, '0')}</div>
                            </div>
                            <div class="flip-label changableFont">${t.seconds}</div>
                        </div>
                    </div>
                </div>`;
            } else if (state.countdownStyle === 'cyber') {
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-cyber">
                        ${hours > 0 ? `<div class="cyber-item"><div class="cyber-value changableFont">${String(hours).padStart(2, '0')}</div><div class="cyber-label changableFont">${t.hours}</div></div>` : ''}
                        <div class="cyber-item"><div class="cyber-value changableFont">${String(minutes).padStart(2, '0')}</div><div class="cyber-label changableFont">${t.minutes}</div></div>
                        <div class="cyber-item"><div class="cyber-value changableFont">${String(seconds).padStart(2, '0')}</div><div class="cyber-label changableFont">${t.seconds}</div></div>
                    </div>
                </div>`;
            } else if (state.countdownStyle === 'cozy') {
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-cozy">
                        ${hours > 0 ? `<div class="cozy-item"><div class="cozy-value changableFont">${String(hours).padStart(2, '0')}</div><div class="cozy-label changableFont">${t.hours}</div></div>` : ''}
                        <div class="cozy-item"><div class="cozy-value changableFont">${String(minutes).padStart(2, '0')}</div><div class="cozy-label changableFont">${t.minutes}</div></div>
                        <div class="cozy-item"><div class="cozy-value changableFont">${String(seconds).padStart(2, '0')}</div><div class="cozy-label changableFont">${t.seconds}</div></div>
                    </div>
                </div>`;
            } else {
                const hoursText = hours > 0 ? `${hours} ${t.hoursShort} ` : '';
                return `<div class="card countdown-container">
                    <h4 class="countdown-title changableFont">${t.shiftEnd}</h4>
                    <div class="countdown-text changableFont">${hoursText}${minutes} ${t.minutesShort} ${seconds} ${t.secondsShort}</div>
                </div>`;
            }
        }

        // Update display
        function updateDisplay() {
            const now = new Date();

            // Update clock
            const clockDisplay = document.getElementById('clock-display');
            if (state.showCurrentTime) {
                if (state.analogClock) {
                    clockDisplay.innerHTML = renderAnalogClock(now);
                } else {
                    clockDisplay.innerHTML = renderDigitalClock(now);
                }
            } else {
                clockDisplay.innerHTML = '';
            }

            // Update countdown
            const countdownDisplay = document.getElementById('countdown-display');
            countdownDisplay.innerHTML = renderCountdown(now);

            // Reapply font styles to newly rendered elements
            updateFont();

            // Reapply custom theme colors to newly rendered elements
            if (state.themeMode === 'custom') {
                // Apply custom clock background
                const clockCards = document.querySelectorAll('.clock-container');
                clockCards.forEach(card => {
                    card.style.backgroundColor = state.customClockBgColor;
                });

                // Apply custom countdown background
                const countdownCards = document.querySelectorAll('.countdown-container');
                countdownCards.forEach(card => {
                    card.style.backgroundColor = state.customCountdownBgColor;
                });
            }
        }

        // Initialize
        loadState();
        updateDisplay();
        setInterval(updateDisplay, 1000);

        // Handle browser back button for drawer
        window.addEventListener('popstate', (event) => {
            // Close drawer when user presses back button
            if (document.getElementById('drawer').classList.contains('open')) {
                closeDrawer();
            }
        });

        // Add swipe gesture to drawer
        const drawer = document.getElementById('drawer');
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;
        let touchEndY = 0;
        let isDragging = false;

        drawer.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
            isDragging = false;
        }, { passive: true });

        drawer.addEventListener('touchmove', (e) => {
            // Check if it's a horizontal swipe (not vertical scroll)
            const currentX = e.changedTouches[0].screenX;
            const currentY = e.changedTouches[0].screenY;
            const diffX = Math.abs(currentX - touchStartX);
            const diffY = Math.abs(currentY - touchStartY);

            if (diffX > diffY && diffX > 10) {
                isDragging = true;
            }
        }, { passive: true });

        drawer.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;

            if (isDragging) {
                handleSwipe();
            }
        }, { passive: true });

        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            const swipeThreshold = 50; // minimum swipe distance

            // Swipe right to left (close drawer)
            if (swipeDistance < -swipeThreshold) {
                closeDrawer();
                // Go back in history to remove the drawer state
                if (history.state && history.state.drawerOpen) {
                    history.back();
                }
            }
        }

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js');
            });
        }
    </script>
</body>
</html>